{% load static %}
{% include 'includes/navbar.html' %}
{% include 'includes/sidebar.html' %}
 
   <div class="action">
      <h1>INVOICES</h1>
      <div class="search_bar">
        <input type="text" placeholder="Search Clients" />
      </div>

      <a href="{% url 'sales:add-invoice' %}" style="text-decoration: none;">
         <button class="button">
          <span class="button_text">ADD NEW</span>
          <span class="button_icon">
            <i class='bx bx-folder-plus'></i>
          </span>
        </button>
        </a>
        <div>
       <form action="{% url 'sowaf:import-customers' %}" method="POST" enctype="multipart/form-data" style="display: flex;">
         {% csrf_token %}
        <input type="file" name="excel_file" accept=".xlsx, .xls, .csv" required style="display: none;" id="excelInput" onchange="this.form.submit()" />
        <label for="excelInput" class="button" style="cursor: pointer;">
         <span class="button_text">IMPORT</span>
        <span class="button_icon">
        <i class='bx bx-import'></i>
        </span>
       </label>
         </form>
       </div>
      <a href="{% url 'sowaf:add-customer' %}" style="text-decoration: none;">
         <button class="button">
          <span class="button_text">EXPORT</span>
          <span class="button_icon">
            <i class='bx bx-export'></i>
          </span>
        </button>
      </a>
          <span>
            <i class='bx bx-printer'></i>
            <i class='bx bx-customize'></i>
            <i class='bx bx-cog' ></i>
          </span>
    </div>
    <div class="main_body">
      <table class="content-table">
        <thead>
          <tr>
            <th>Invoice no.</th>
            <th>Customer Name</th>
            <th>Created date</th>
            <th>Due date</th>
            <th>Email</th>
            <th>Billing address</th>
            <th>Status</th>
            <th>Operations</th>
            <th>Actions</th>
            <th>Created_by</th>
          </tr>
        </thead>
        <tbody>
        {% for invoice in invoices %}
          <tr>
            <td>{{ invoice.invoice_id }}</td>
            <td>{{ invoice.customer_id }} </td>
            <td>{{ invoice.invoice_date }}</td>
            <td>{{ invoice.due_date }}</td>
            <td>{{ invoice.email }}</td>
            <td>{{ invoice.billing_address }}</td>
            <td>{{ invoice.status }}</td>
            <td>Retire/inactive</td>
            
            <td>
              <a href="" title="Edit" style="color:green;">
              <i class='bx bxs-edit'></i> 
              </a>
                <a href="" title="Delete" onclick="return confirm('Are you sure you want to delete this customer?');">
               <i class='bx bxs-trash' style="color:green; margin-left: 10px;"></i>
               </a>
          <a href="{% url 'sales:full-invoice-details' %}"  style="color:green; margin-left: 10px; text-decoration: none;">
            view
               </a>
          </td>
          <td>{{ sales.User }}</td>
          </tr>   
          {% empty %}    
                <tr>
      <td colspan="6">No invoices available.</td>
    </tr>
         {% endfor %}
        </tbody>
      </table>
      <a href="{% url 'sowaf:import_customers_template' %}" style="text-decoration: none; float:right;">
        <button class="button">
          <span class="button_text">Template</span>
        </button>
      </a>
    </div>
    {% include 'includes/footer.html' %}